package com.mercurio.lms.configuracoes.swt.action;

import java.util.List;
import java.util.Map;

import com.mercurio.adsm.framework.model.CrudAction;
import com.mercurio.adsm.framework.model.ResultSetPage;
import com.mercurio.adsm.framework.util.TypedFlatMap;
import com.mercurio.lms.configuracoes.model.service.EnderecoPessoaService;
import com.mercurio.lms.configuracoes.model.service.TelefoneEnderecoService;

/**
 * Generated by: ADSM ActionGenerator
 *  
 * Não inserir documentação após ou remover a tag do XDoclet a seguir.
 * O valor do <code>id</code> informado abaixo deve ser utilizado para referenciar este serviço.
 * @spring.bean id="lms.configuracoes.swt.manterTelefonesPessoaAction"
 */

public class ManterTelefonesPessoaAction extends CrudAction {
	
	private EnderecoPessoaService enderecoPessoaService;
	private TelefoneEnderecoService telefoneEnderecoService;
	
	public List<Map<String, Object>> findEnderecoCompletoCombo(Map<String, Object> criteria) {
		return enderecoPessoaService.findEnderecoCompletoCombo(criteria);
	}
	
	@Override
	public ResultSetPage findPaginated(Map criteria) {
		return telefoneEnderecoService.findPaginated(prepareCriteria(criteria));
	}
	
	@Override
	public Integer getRowCount(Map criteria) {
		return telefoneEnderecoService.getRowCount(prepareCriteria(criteria));
	}
	
	/*
	 * METODOS PRIVADOS
	 */
	private TypedFlatMap prepareCriteria(Map criteria) {
		TypedFlatMap result = new TypedFlatMap();
		result.put("_currentPage", criteria.get("_currentPage"));
		result.put("_pageSize", criteria.get("_pageSize"));
		result.put("_order", criteria.get("_order"));
		result.put("tpTelefone", criteria.get("tpTelefone"));
		result.put("tpUso", criteria.get("tpUso"));
		result.put("pessoa.idPessoa", criteria.get("idPessoa"));
		result.put("enderecoPessoa.idEnderecoPessoa", criteria.get("idEnderecoPessoa"));
		if (criteria.get("nrDdi") != null) {
			result.put("nrDdi", "" + criteria.get("nrDdi"));
		}
		if (criteria.get("nrDdd") != null) {
			result.put("nrDdd", "" + criteria.get("nrDdd"));
		}
		if (criteria.get("nrTelefone") != null) {
			result.put("nrTelefone", "" + criteria.get("nrTelefone"));
		}
		return result;
	}
	
	/*
	 * GETTERS E SETTERS
	 */

	public void setEnderecoPessoaService(EnderecoPessoaService enderecoPessoaService) {
		this.enderecoPessoaService = enderecoPessoaService;
	}
	public void setTelefoneEnderecoService(TelefoneEnderecoService telefoneEnderecoService) {
		this.telefoneEnderecoService = telefoneEnderecoService;
	}

}
