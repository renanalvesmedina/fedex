package com.mercurio.lms.vol.action;

import java.util.ArrayList;
import java.util.List;

import com.mercurio.adsm.framework.model.CrudAction;
import com.mercurio.adsm.framework.model.ResultSetPage;
import com.mercurio.adsm.framework.util.TypedFlatMap;


/**
 * Generated by: ADSM ActionGenerator
 *  
 * Não inserir documentação após ou remover a tag do XDoclet a seguir.
 * O valor do <code>id</code> informado abaixo deve ser utilizado para referenciar este serviço.
 * @spring.bean id="lms.vol.manterParametrosAction"
 * 					
 */

public class ManterParametrosAction extends CrudAction {
	
	public List find(TypedFlatMap criteria) {
		List lista = new ArrayList();		
				
		//Cria os itens que serão enviados para o jsp
		TypedFlatMap item = new TypedFlatMap();
		TypedFlatMap item2 = new TypedFlatMap();
		
		//Adiciona os valores que serão enviados ao jsp			
		item.put("idParametro", "1");
		item.put("refresh", "120");
		item.put("alertaCel", "30");
		item.put("alertaBaixa", "1");
		item.put("emailRecusa", "mercdisp.POA@mercurio.com");
		item.put("filial.idFilial", "1");
		item.put("filial.sgFilial", "POA");
		
		item2.put("idParametro", "2");
		item2.put("refresh", "60");
		item2.put("alertaCel", "15");
		item2.put("alertaBaixa", "4");
		item2.put("emailRecusa", "mercdisp.SAO@mercurio.com");
		item2.put("filial.idFilial", "2");
		item2.put("filial.sgFilial", "SAO");
		
		//Adiciona os itens na lista
		lista.add(item);
		lista.add(item2);
		
		return lista;
	}

	public ResultSetPage findPaginated(TypedFlatMap criteria) {		
		List lista = this.find(criteria);
		List pagina = new ArrayList();
		
		int fim    = criteria.getInteger("_pageSize").intValue() * criteria.getInteger("_currentPage").intValue() - 1;  
		int inicio = fim - (criteria.getInteger("_pageSize").intValue() - 1); 
		int total  = lista.size() - 1;			
		
		if(fim > total) {
			fim = total;		
		}
		
		for(int i=inicio; i <= fim ; i++) {
			pagina.add(lista.get(i));
		}
		 		
		ResultSetPage rsp = new ResultSetPage(criteria.getInteger("_currentPage"), pagina);
		
		if(total == fim) {
			rsp.setHasNextPage(false);
		}
		else {
			rsp.setHasNextPage(true);
		}
		
		if(inicio == 0) {
			rsp.setHasPriorPage(false);
		}
		else {
			rsp.setHasPriorPage(true);
		}
		
		return rsp;
	}

	public Integer getRowCount(TypedFlatMap criteria) {
		//FIXME pode-se utilizar o super.getRowCount() 
		return Integer.valueOf(this.find(criteria).size());
	}
	
	public TypedFlatMap findById(java.lang.Long id) {
		return (TypedFlatMap)this.find(null).get(id.intValue()-1);
	}
	
	
	public List findLookupFilial(TypedFlatMap criteria) {
		return null;
	}
	
}
