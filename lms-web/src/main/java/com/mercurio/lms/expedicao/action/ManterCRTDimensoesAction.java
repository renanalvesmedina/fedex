package com.mercurio.lms.expedicao.action;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import com.mercurio.adsm.framework.util.TypedFlatMap;
import com.mercurio.lms.expedicao.model.CtoInternacional;
import com.mercurio.lms.expedicao.model.service.DimensaoService;
import com.mercurio.lms.expedicao.util.CtoInternacionalUtils;

/**
 * Generated by: ADSM ActionGenerator
 *  
 * Não inserir documentação após ou remover a tag do XDoclet a seguir.
 * O valor do <code>id</code> informado abaixo deve ser utilizado para referenciar este serviço.
 * @spring.bean id="lms.expedicao.manterCRTDimensoesAction"
 */

public class ManterCRTDimensoesAction extends DigitarNotaDimensoesAction {
	private DimensaoService dimensaoService;

	protected List getDimensoesInSession() {
		CtoInternacional ctoInternacional = getCtoInternacionalInSession();
		return ctoInternacional.getDimensoes();
	}

	public Serializable getIdCtoInternacionalInSession(){
		CtoInternacional ctoInternacional = getCtoInternacionalInSession();
		TypedFlatMap crt = new TypedFlatMap();

		crt.put("idCtoInternacional", ctoInternacional.getIdDoctoServico());

		return crt;
	}

	private CtoInternacional getCtoInternacionalInSession(){
		CtoInternacional ctoInternacional = CtoInternacionalUtils.getCtoInternacionalInSession();

		if(ctoInternacional.getDimensoes() == null && ctoInternacional.getIdDoctoServico() != null){
			List dimensoes = dimensaoService.findByIdCtoInternacional(ctoInternacional.getIdDoctoServico());
			ctoInternacional.setDimensoes(dimensoes);
		} else if(ctoInternacional.getDimensoes() == null){
			ctoInternacional.setDimensoes(new ArrayList());
		}

		return ctoInternacional;
	}

	public void setDimensaoService(DimensaoService dimensaoService) {
		this.dimensaoService = dimensaoService;
	}
	
	
	
	
}
