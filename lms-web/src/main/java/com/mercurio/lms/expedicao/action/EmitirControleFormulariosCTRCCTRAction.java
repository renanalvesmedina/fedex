package com.mercurio.lms.expedicao.action;

import java.util.HashMap;
import java.util.Map;

import com.mercurio.adsm.framework.report.ReportActionSupport;
import com.mercurio.adsm.framework.session.SessionContext;
import com.mercurio.lms.expedicao.report.ControleFormularioCTRCService;
import com.mercurio.lms.municipios.model.Filial;
import com.mercurio.lms.util.session.SessionKey;

/**
 * Generated by: ADSM ActionGenerator
 *  
 * Não inserir documentação após ou remover a tag do XDoclet a seguir.
 * O valor do <code>id</code> informado abaixo deve ser utilizado para referenciar este serviço.
 * @spring.bean id="lms.expedicao.emitirControleFormulariosCTRCCTRAction"
 */

public class EmitirControleFormulariosCTRCCTRAction extends ReportActionSupport {
	
	public void setService(ControleFormularioCTRCService service) {
		this.reportServiceSupport = service;
	}
 
    /**
     * Função que retorna um mapa com os dados da filial vinculada ao 
     * usuario que esta logado
     * 
     * @return
     */
    public Map filialFindByUser(){
    	Filial filial = null;
    	Map retorno = new HashMap();
    	filial = (Filial)SessionContext.get(SessionKey.FILIAL_KEY);
    	if (filial != null){
    	retorno.put("idFilial",filial.getIdFilial());
    	retorno.put("sgFilial",filial.getSgFilial());
    	retorno.put("nmFilial",filial.getPessoa().getNmFantasia());
    	}
    	return retorno;
    }

}
