package com.mercurio.lms.municipios.action;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import com.mercurio.adsm.framework.model.CrudAction;
import com.mercurio.adsm.framework.util.TypedFlatMap;
import com.mercurio.lms.municipios.model.Filial;
import com.mercurio.lms.municipios.model.service.FilialRotaService;
import com.mercurio.lms.municipios.model.service.FilialService;

/**
 * Generated by: ADSM ActionGenerator
 *  
 * Não inserir documentação após ou remover a tag do XDoclet a seguir.
 * O valor do <code>id</code> informado abaixo deve ser utilizado para referenciar este serviço.
 * @spring.bean id="lms.municipios.emitirPerformanceHorarioRotasAction"
 */

public class EmitirPerformanceHorarioRotasAction extends CrudAction {
	
	public List findLookupRotaFilial(TypedFlatMap criteria) {
		Long idRota = criteria.getLong("rota.idRota");
		
		List list = filialRotaService.findFiliaisRotaByRota(idRota);
		List resultado = new ArrayList();
		Iterator i = list.iterator();
		while (i.hasNext()) {
			Map elemento = (Map) i.next();
			String sgFilial = (String)((Map)elemento.get("filial")).get("sgFilial");
			Long   idFilial = (Long)((Map)elemento.get("filial")).get("idFilial");
			String nmFilial = (String)elemento.get("nmFilial");
			
			Map retorno = new HashMap();
			retorno.put("idFilial", idFilial);
			retorno.put("siglaNomeFilial", sgFilial + " - " + nmFilial);
			resultado.add(retorno);
		}
		return resultado;
		
	}
	
	public List findLookupFilial(Map criteria) {
		return filialService.findLookupFilial(criteria);
	}
	public Filial findFilialUsuarioLogado() {
		return filialService.getFilialUsuarioLogado();
	}
	
	
	private FilialService filialService;
	private FilialRotaService filialRotaService;

	public FilialService getFilialService() {
		return filialService;
	}

	public void setFilialService(FilialService filialService) {
		this.filialService = filialService;
	}

	public FilialRotaService getFilialRotaService() {
		return filialRotaService;
	}

	public void setFilialRotaService(FilialRotaService filialRotaService) {
		this.filialRotaService = filialRotaService;
	}
}
