package com.mercurio.lms.vendas.action;

import com.mercurio.adsm.framework.model.CrudAction;
import com.mercurio.adsm.framework.util.TypedFlatMap;
import com.mercurio.lms.vendas.model.service.AcertoFilialRegionalClienteService;

/**
 * Generated by: ADSM ActionGenerator
 *  
 * Não inserir documentação após ou remover a tag do XDoclet a seguir.
 * O valor do <code>id</code> informado abaixo deve ser utilizado para referenciar este serviço.
 * @spring.bean id="lms.vendas.manterAcertoFilialRegionalClienteAction"
 */

public class ManterAcertoFilialRegionalClienteAction extends CrudAction {

	private AcertoFilialRegionalClienteService acertoFilialRegionalClienteService;
	
	public TypedFlatMap executarRotina(TypedFlatMap map){
		
		int total = 0;
				
		Boolean blAcertoRegionalFilial = map.getBoolean("blAcertoRegionalFilial");
		if(blAcertoRegionalFilial){
			
			final Long idFilial 	  	  = map.getLong("filial.idFilial");
			final Long idRegionalAnterior = map.getLong("regionalAnterior.idRegional");
			final Long idRegionalAtual 	  = map.getLong("regionalAtual.idRegional");			
			
			total = acertoFilialRegionalClienteService.acertaRegionalFilialCliente(idFilial,idRegionalAnterior,idRegionalAtual);
		}else{
			
			final Long idMunicipio  	= map.getLong("municipio.idMunicipio");
			final Long idFilialAnterior = map.getLong("filialAnterior.idFilial");
			final Long idFilialAtual 	= map.getLong("filialAtual.idFilial");			
			
			total = acertoFilialRegionalClienteService.acertaFilialMunicipioCliente(idMunicipio,idFilialAnterior,idFilialAtual);
		}
		map.put("total", total);
		
		return map;
	}

	public void setAcertoFilialRegionalClienteService(
			AcertoFilialRegionalClienteService acertoFilialRegionalClienteService) {
		this.acertoFilialRegionalClienteService = acertoFilialRegionalClienteService;
	}
	
}
