package com.mercurio.lms.prestcontasciaaerea.action;

import java.util.List;

import com.mercurio.adsm.framework.model.CrudAction;
import com.mercurio.adsm.framework.util.TypedFlatMap;
import com.mercurio.lms.municipios.model.service.EmpresaService;
import com.mercurio.lms.prestcontasciaaerea.model.service.DesmarcarPrestacaoContaDecendialService;

/**
 * Generated by: ADSM ActionGenerator
 *  
 * Não inserir documentação após ou remover a tag do XDoclet a seguir.
 * O valor do <code>id</code> informado abaixo deve ser utilizado para referenciar este serviço.
 * @spring.bean id="lms.prestcontasciaaerea.desmarcarPrestacoesContasAction"
 */

public class DesmarcarPrestacoesContasAction extends CrudAction {
    
    private EmpresaService empresaService;
    private DesmarcarPrestacaoContaDecendialService desmarcarPrestacaoContaDecendialService;    

	/**
     * Busca a Prestação Conta que deve ser removida. Atualiza a AWB e remove dados filhos
	 * @param criteria Critérios de pesquisa
	 */
	public void updatePrestacaoContas(TypedFlatMap criteria){        
		Long idEmpresa = criteria.getLong("idCompanhiaAerea");
		Long nrPrestacaoConta = criteria.getLong("numeroCT");
        
		this.getDesmarcarPrestacaoContaDecendialService().deletePrestacaoContaDecencial(idEmpresa, nrPrestacaoConta);
        
	}
    
    /**
     * Busca as Empresas para a combo de Cia Aérea
     * @param criterios Critérios de pesquisa
     * @return Lista de empresas encontradas na pesquisa
     */
    public List findComboEmpresas(TypedFlatMap criterios){        
        String tpEmpresa = criterios.getString("empresa.tpEmpresa");
        return this.getEmpresaService().findByTpEmpresaTpSituacao(tpEmpresa,null);
    }

    /**
     * @return Returns the empresaService.
     */
    public EmpresaService getEmpresaService() {
        return empresaService;
    }

    /**
     * @param empresaService The empresaService to set.
     */
    public void setEmpresaService(EmpresaService empresaService) {
        this.empresaService = empresaService;
    }

    /**
     * @return Returns the desmarcarPrestacaoContaDecendialService.
     */
    public DesmarcarPrestacaoContaDecendialService getDesmarcarPrestacaoContaDecendialService() {
        return desmarcarPrestacaoContaDecendialService;
    }

    /**
     * @param desmarcarPrestacaoContaDecendialService The desmarcarPrestacaoContaDecendialService to set.
     */
    public void setDesmarcarPrestacaoContaDecendialService(
            DesmarcarPrestacaoContaDecendialService desmarcarPrestacaoContaDecendialService) {
        this.desmarcarPrestacaoContaDecendialService = desmarcarPrestacaoContaDecendialService;
    }

}
